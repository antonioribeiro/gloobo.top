if(typeof(Number.prototype._formatarDoisDigitos)!="function"){Number.prototype._formatarDoisDigitos=function(){return this.valueOf()<10?"0"+this.valueOf():this.valueOf()}}if(typeof(Number.prototype._formatarTresDigitos)!="function"){Number.prototype._formatarTresDigitos=function(){var a="00"+this.valueOf();a=a.substring(a.length-3);return a}}if(typeof(Number.prototype._converterParaJson)!="function"){Number.prototype._converterParaJson=function(){return this.valueOf().toString()}}if(typeof(Boolean.prototype._converterParaJson)!="function"){Boolean.prototype._converterParaJson=function(){return this.valueOf().toString()}}if(typeof(Date.prototype._converterParaJson)!="function"){Date.prototype._converterParaJson=function(){return ControlaAcesso.Utils.quote(this.getUTCFullYear()+"-"+(this.getUTCMonth()+1)._formatarDoisDigitos()+"-"+this.getUTCDate()._formatarDoisDigitos()+"T"+this.getUTCHours()._formatarDoisDigitos()+":"+this.getUTCMinutes()._formatarDoisDigitos()+":"+this.getUTCSeconds()._formatarDoisDigitos()+"."+this.getUTCMilliseconds()._formatarTresDigitos()+"Z")}}if(typeof(String.prototype._converterParaJson)!="function"){String.prototype._converterParaJson=function(){return ControlaAcesso.Utils.quote(this.valueOf())}}if(typeof(Array.prototype._converterParaJson)!="function"){Array.prototype._converterParaJson=function(){var a=[];for(var b=0;b<this.length;b++){a[a.length]=ControlaAcesso.JSON.extrairValorPropriedade(this[b])}return"["+a.join(",")+"]"}}var ControlaAcesso={};ControlaAcesso.Versao="1.2";ControlaAcesso.NOME_COOKIE="infgw";ControlaAcesso.NOME_LOCALSTORAGE="infgwls";ControlaAcesso.NOME_COOKIE_CONF="infgwconf";ControlaAcesso.NOME_COOKIE_DEGUSTACAO="infgw-deg";ControlaAcesso.GLBID="GLBID";ControlaAcesso.isPrivateMode=null;ControlaAcesso.Configuracao={json:null,CAMINHO_DO_JSON:"/api/controla-acesso/configuracao.json",carregar:function(f,c,d){function b(g,i){var h="Nome da configuracao = "+c+" url base da configuracao = "+d+" - "+g;ControlaAcesso.Erro.registrar(h,i)}function a(){try{f.iniciar()}catch(g){b(g.message,ControlaAcesso.Erro.AO_EXECUTAR_O_METODO_NA_CONFIGURACAO)}}function e(){var g="json";if(d!=""){g="jsonp"}$.ajax({cache:true,dataType:g,data:{produto:c},jsonpCallback:"paywallConfig",url:d+ControlaAcesso.Configuracao.CAMINHO_DO_JSON,success:function(h){ControlaAcesso.Configuracao.json=h;a()},error:function(i,j,h){b(h,ControlaAcesso.Erro.AO_CONECTAR_PARA_CARREGAR_CONFIGURACAO)}})}if(this.json!=null){a()}else{if(d==null){d=""}if(c==null){c=""}e()}}};ControlaAcesso.Leitor={TIPO_DESCONHECIDO:"-",TIPO_CADASTRADO:"cadastrado",TIPO_ASSIN_SEM:"assinante sem digital",TIPO_ASSIN_COM:"assinante com digital",STATUS_NASCENTE:"-",STATUS_REGISTER:"register-wall",STATUS_REGISTER_PASS:"register-wall-passou",STATUS_PAYWALL:"paywall",STATUS_PAYWALL_PASS:"paywall-passou",STATUS_PAYWALL_CONV:"paywall-converteu",totalDeVisualizacoes:function(){var a=ControlaAcesso.Model.carregar();return a.itens.length},relatorio:function(){try{var a=ControlaAcesso.Model.carregar();var c=ControlaAcesso.Model.obterConfiguracaoEventos(a.itens.length);console.info("Leitor está no evento de:",c.nomeDoEvento);console.info("Status no analytics:",ControlaAcesso.Leitor.status());console.info("Data de Inicialização:",a.dtIni);console.info("Total de Visualizações:",this.totalDeVisualizacoes());console.info("Data de Execução do Register:",a.eventos.RegisterWall.dtExec);console.info("Data de Conversão no Register:",a.eventos.RegisterWall.dtConv);console.info("Data de Execução do Paywall:",a.eventos.Paywall.dtExec);console.info("Data de Conversão no Paywall:",a.eventos.Paywall.dtConv)}catch(b){}},status:function(){var c=ControlaAcesso.Cookies.obterValorCookie(ControlaAcesso.NOME_COOKIE);var d=ControlaAcesso.Cookies.obterValorCookie(ControlaAcesso.NOME_COOKIE_CONF);if(c==null||c==""||d==null||d==""){return"00"}var b=$.parseJSON(c);if(b.eventos.Paywall.dtConv!=null){return ControlaAcesso.Leitor.STATUS_PAYWALL_PASS}if(b.eventos.Paywall.dtExec!=null){return ControlaAcesso.Leitor.STATUS_PAYWALL}if(b.eventos.RegisterWall.dtExec!=null&&b.eventos.RegisterWall.dtConv==null){return ControlaAcesso.Leitor.STATUS_REGISTER}var a=$.parseJSON(d);if((b.itens.length==a.RegisterWall+1||a.Paywall==null&&b.itens.length==a.RegisterWall)&&b.eventos.RegisterWall.dtConv!=null){return ControlaAcesso.Leitor.STATUS_REGISTER_PASS}return b.itens.length._formatarDoisDigitos().toString()},tipoDeCadastro:function(){var c=ControlaAcesso.Cookies.obterValorCookie(ControlaAcesso.NOME_COOKIE);if(c==null||c==""){return ControlaAcesso.Leitor.TIPO_DESCONHECIDO}var a=$.parseJSON(c);var b=a.eventos.Paywall.motivo;if(b){if(b=="UPGRADE"){return ControlaAcesso.Leitor.TIPO_ASSIN_SEM}var d={AUTORIZADO:true,ACESSO_FORA_DO_PERIODO:true,AUTORIZADO_COM_RESSALVA:true};if(d[b]){return ControlaAcesso.Leitor.TIPO_ASSIN_COM}}if(b||a.eventos.RegisterWall.dtConv!=null||ControlaAcesso.Cookies.obterValorCookie(ControlaAcesso.GLBID)){return ControlaAcesso.Leitor.TIPO_CADASTRADO}return ControlaAcesso.Leitor.TIPO_DESCONHECIDO}};ControlaAcesso.GA={obterTipoCadastro:function(c,d){function g(t){var s=null;if(t){var u=t.indexOf("-",1);if(u<0){s=t}else{s=t.substring(0,u).trim()}}return s}function a(t){var s=null;if(t){var u=t.indexOf("-",1);if(u<0){s=""}else{s=t.substring(u+1).trim()}}return s}function p(){var t=null;var s=$.parseJSON(ControlaAcesso.Cookies.obterValorCookie(ControlaAcesso.NOME_COOKIE));if(s!=null){t=s.eventos.Paywall.motivo}return t}function f(){var t=ControlaAcesso.Leitor.TIPO_ASSIN_SEM;var s=p();if(s){if(s=="ENCERRADO"||s=="BLOQUEADO"||s=="CANCELADO"){t=ControlaAcesso.Leitor.TIPO_CADASTRADO}}return t}function e(){var t=ControlaAcesso.Leitor.TIPO_ASSIN_COM;var s=p();if(s){if(s=="ENCERRADO"||s=="BLOQUEADO"||s=="CANCELADO"){t=ControlaAcesso.Leitor.TIPO_CADASTRADO}}return t}function q(){var t=ControlaAcesso.Leitor.TIPO_ASSIN_COM;var s=p();if(s){if(s=="UPGRADE"){t=ControlaAcesso.Leitor.TIPO_CADASTRADO}}return t}var o=[ControlaAcesso.Leitor.TIPO_DESCONHECIDO,ControlaAcesso.Leitor.TIPO_CADASTRADO,ControlaAcesso.Leitor.TIPO_ASSIN_SEM,ControlaAcesso.Leitor.TIPO_ASSIN_COM];function m(t){if(t!=undefined){for(var s=0;s<o.length;s++){if(t==o[s]){return s}}}return -1}var b=[[ControlaAcesso.Leitor.TIPO_DESCONHECIDO,ControlaAcesso.Leitor.TIPO_CADASTRADO,ControlaAcesso.Leitor.TIPO_ASSIN_SEM,ControlaAcesso.Leitor.TIPO_ASSIN_COM],[ControlaAcesso.Leitor.TIPO_CADASTRADO,ControlaAcesso.Leitor.TIPO_CADASTRADO,f,e],[ControlaAcesso.Leitor.TIPO_ASSIN_SEM,ControlaAcesso.Leitor.TIPO_ASSIN_SEM,ControlaAcesso.Leitor.TIPO_ASSIN_SEM,q],[ControlaAcesso.Leitor.TIPO_ASSIN_COM,ControlaAcesso.Leitor.TIPO_ASSIN_COM,ControlaAcesso.Leitor.TIPO_ASSIN_COM,ControlaAcesso.Leitor.TIPO_ASSIN_COM]];var k=g(d);var h=g(c);var i=m(k);var n=m(h);var r;if(n<0||i<0||i==n){if(i>=0){r=k}else{r=ControlaAcesso.Leitor.TIPO_DESCONHECIDO}}else{var j=b[i][n];if(typeof(j)=="function"){r=j()}else{r=j}}if(r==ControlaAcesso.Leitor.TIPO_ASSIN_SEM){var l=a(c);if(l!=""){r+=" - "+l}}return r},obterTipoUsuario:function(c){var e=$.parseJSON(ControlaAcesso.Cookies.obterValorCookie(ControlaAcesso.NOME_COOKIE));function i(){if(e==null||e.eventos==null){return ControlaAcesso.Leitor.STATUS_NASCENTE}if(e.eventos.Paywall.dtConv!=null){return ControlaAcesso.Leitor.STATUS_PAYWALL_PASS}if(e.eventos.Paywall.dtExec!=null){return ControlaAcesso.Leitor.STATUS_PAYWALL}if(e.eventos.RegisterWall.dtExec!=null&&e.eventos.RegisterWall.dtConv==null){return ControlaAcesso.Leitor.STATUS_REGISTER}if(e.eventos.RegisterWall.dtConv!=null){return ControlaAcesso.Leitor.STATUS_REGISTER_PASS}return ControlaAcesso.Leitor.STATUS_NASCENTE}function j(){var n=c;var m=(e.eventos.Paywall?e.eventos.Paywall.motivo:null);if(m){if(e.eventos.Paywall.dtConv==null&&(m=="ENCERRADO"||m=="BLOQUEADO"||m=="CANCELADO"||m=="UPGRADE")){n=ControlaAcesso.Leitor.STATUS_PAYWALL}}return n}var b=[ControlaAcesso.Leitor.STATUS_NASCENTE,ControlaAcesso.Leitor.STATUS_REGISTER,ControlaAcesso.Leitor.STATUS_REGISTER_PASS,ControlaAcesso.Leitor.STATUS_PAYWALL,ControlaAcesso.Leitor.STATUS_PAYWALL_PASS,ControlaAcesso.Leitor.STATUS_PAYWALL_CONV];function d(n){if(n!=undefined){for(var m=0;m<b.length;m++){if(n==b[m]){return m}}}return -1}var h=[[ControlaAcesso.Leitor.STATUS_NASCENTE,ControlaAcesso.Leitor.STATUS_REGISTER,ControlaAcesso.Leitor.STATUS_REGISTER_PASS,ControlaAcesso.Leitor.STATUS_PAYWALL,ControlaAcesso.Leitor.STATUS_PAYWALL_PASS,ControlaAcesso.Leitor.STATUS_PAYWALL_CONV],[ControlaAcesso.Leitor.STATUS_REGISTER,ControlaAcesso.Leitor.STATUS_REGISTER,ControlaAcesso.Leitor.STATUS_REGISTER_PASS,ControlaAcesso.Leitor.STATUS_PAYWALL,ControlaAcesso.Leitor.STATUS_PAYWALL_PASS,ControlaAcesso.Leitor.STATUS_PAYWALL_CONV],[ControlaAcesso.Leitor.STATUS_REGISTER_PASS,ControlaAcesso.Leitor.STATUS_REGISTER_PASS,ControlaAcesso.Leitor.STATUS_REGISTER_PASS,ControlaAcesso.Leitor.STATUS_PAYWALL,ControlaAcesso.Leitor.STATUS_PAYWALL_PASS,ControlaAcesso.Leitor.STATUS_PAYWALL_CONV],[ControlaAcesso.Leitor.STATUS_PAYWALL,ControlaAcesso.Leitor.STATUS_PAYWALL,ControlaAcesso.Leitor.STATUS_PAYWALL,ControlaAcesso.Leitor.STATUS_PAYWALL,j,j],[ControlaAcesso.Leitor.STATUS_PAYWALL_PASS,ControlaAcesso.Leitor.STATUS_PAYWALL_PASS,ControlaAcesso.Leitor.STATUS_PAYWALL_PASS,ControlaAcesso.Leitor.STATUS_PAYWALL_PASS,ControlaAcesso.Leitor.STATUS_PAYWALL_PASS,ControlaAcesso.Leitor.STATUS_PAYWALL_CONV]];var k=i();var g=d(k);var a=d(c);var f;if(a<0||g==a){f=k}else{var l=h[g][a];if(typeof(l)=="function"){f=l()}else{f=l}}return f}};ControlaAcesso.Utils={ParChaveValor:function(b,a){this.chave=b;this.valor=a;this.toString=function(){return this.chave.toString()+"="+this.valor.toString()}},obterTipoDe:function(d){var a=typeof(d);var c=/^\[object\s(\w+)]$/i;var b;if(d===undefined){throw new Error("Referência ou tipo invalidos")}if(d===null){return"null"}if(a=="object"){b=c.exec(Object.prototype.toString.call(d));a=b[1].toLowerCase()}return a},quote:function(a){return'"'+a+'"'},trim:function(b){var a=/^\s+|\s+$/gim;return(b+"").replace(a,"")},extrairDominio:function(c){var b=/^(?:http(?:s*):\/\/)(.*?)\//;var a=b.exec(c+"/");if(a!=null&&a.length==2){return a[1]}return""},extrairValorQuerystring:function(d,b){if(b==null){b=window.location.href}d=d.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+d+"=([^&#]*)");var a=c.exec(b);if(a==null){return""}else{return a[1]}},writeLog:null,log:function(b){try{if(this.writeLog==null){this.writeLog=ControlaAcesso.Cookies.obterValorCookie("writeLog")=="true"}if(this.writeLog){console.info(">>ControlaAcesso.log:"+b)}}catch(a){}},retry:function(c,f){var e=0,d=50,b=10,a=false;var g=window.setInterval(function(){if(c()){window.clearInterval(g);f(a)}if(e++>d){window.clearInterval(g);a=true;f(a)}},10)},isIE10OrLater:function(b){var c=b.toLowerCase();if(c.indexOf("msie")===0&&c.indexOf("trident")===0){return false}var a=/(?:msie|rv:)\s?([\d\.]+)/.exec(c);if(a&&parseInt(a[1],10)>=10){return true}return false},isNavegadorNativoAndroid:function(){var a=navigator.userAgent;var b=((a.indexOf("Mozilla/5.0")>-1&&a.indexOf("Android ")>-1&&a.indexOf("AppleWebKit")>-1)&&!(a.indexOf("Chrome")>-1));return b},detectPrivateMode:function(g){var d;if(window.webkitRequestFileSystem){window.webkitRequestFileSystem(window.TEMPORARY,1,function(){d=false},function(h){d=true})}else{if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var b;try{b=window.indexedDB.open("test")}catch(f){d=true}if(typeof d==="undefined"){ControlaAcesso.Utils.retry(function a(){return b.readyState==="done"?true:false},function c(e){if(!e){d=b.result?false:true}})}}else{if(ControlaAcesso.Utils.isIE10OrLater(window.navigator.userAgent)){d=false;try{if(!window.indexedDB){d=true}}catch(f){d=true}}else{if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(f){d=true}if(typeof d==="undefined"){d=false;window.localStorage.removeItem("test")}}}}}ControlaAcesso.Utils.retry(function a(){return typeof d!=="undefined"?true:false},function c(e){g(d)})}};ControlaAcesso.Cookies={obterValorCookie:function(g){var b=document.cookie.split(";");var f=/([a-zA-Z0-9-]+)=(.*)/im;var d;var c;try{for(var a=0;a<b.length;a++){d=f.exec(b[a]);c=new ControlaAcesso.Utils.ParChaveValor(d[1],d[2]);if(c.chave==g){return c.valor}}}catch(h){}return""},calcularDataExpiracao:function(b,c){var a=new Date();if(c){a.setTime(c.getTime())}a.setTime(a.getTime()+(b*24*60*60*1000));return a},criarParametros:function(a,b,f){var c=[];var e;var d="";e=new ControlaAcesso.Utils.ParChaveValor(a,b);c.push(e.toString());for(var g in f){d=(g=="expires"?f[g].toUTCString():f[g]);if(d!=""){e=new ControlaAcesso.Utils.ParChaveValor(g,d);c.push(e.toString())}}return c.join("; ")},escreverCookie:function(a,c,e,d){var b="";if(ControlaAcesso.Utils.trim(a)==""){throw new Error("O nome do cookie deve ser informado")}if(!d&&ControlaAcesso.Utils.trim(c)==""){throw new Error("O valor do cookie deve ser informado")}b=this.criarParametros(a,c,e);document.cookie=b},removerCookie:function(b,a){if(!a){a={}}a.expires=this.calcularDataExpiracao(-1);this.escreverCookie(b,"",a,true)}};ControlaAcesso.JSON={extrairValorPropriedade:function(b){var a=ControlaAcesso.Utils.obterTipoDe(b);if(a=="null"){return"null"}if(a=="object"){return this.conveterParaJson(b)}return b._converterParaJson()},conveterParaJson:function(c){if(window.JSON){return JSON.stringify(c)}var b=[];if(ControlaAcesso.Utils.obterTipoDe(c)=="null"){return"null"}for(var a in c){if(ControlaAcesso.Utils.obterTipoDe(c[a])=="function"){continue}b[b.length]=ControlaAcesso.Utils.quote(a)+":"+this.extrairValorPropriedade(c[a])}if(ControlaAcesso.Utils.obterTipoDe(c)=="object"){return"{"+b.join(",")+"}"}return b.join(",")},parsearDataFormatoJson:function(d){var c=/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(\.(\d{3}))?Z/im;var a;var b=new Date();if(!c.test(d)){throw new Error("A data '"+d+"' está no formato inválido")}a=c.exec(d);b.setUTCFullYear(a[1]);b.setUTCMonth(a[2]-1);b.setUTCDate(a[3]);b.setUTCHours(a[4]);b.setUTCMinutes(a[5]);b.setUTCSeconds(a[6]);if(a[8]){b.setUTCMilliseconds(a[8])}return b}};ControlaAcesso.Model={Eventos:function(){this.add=function(b,a){this[b]=a}},Evento:function(){this.dtExec=null;this.dtConv=null;this.motivo=null},Registro:function(){this.itens=[];this.dtIni=null;this.dtExp=null;this.eventos=new ControlaAcesso.Model.Eventos();this.atualizarDataDeExecucao=function(a){this.eventos[a.nomeDoEvento].dtExec=new Date();ControlaAcesso.Model.salvar(this)};this.atualizarDataDeConversao=function(a){if(typeof a=="undefined"){a=ControlaAcesso.Model.obterConfiguracaoEventos()}this.eventos[a.nomeDoEvento].dtConv=new Date();ControlaAcesso.Model.salvar(this)};this.inserirMotivo=function(a,b){if(typeof b=="undefined"){b=ControlaAcesso.Model.obterConfiguracaoEventos()}this.eventos[b.nomeDoEvento].motivo=a;ControlaAcesso.Model.salvar(this)};this.adicionarConteudoVisualizado=function(a){this.itens[this.itens.length]=a;ControlaAcesso.Model.salvar(this)}},criarEventos:function(){var a={};a.RegisterWall=new ControlaAcesso.Model.Evento();a.Paywall=new ControlaAcesso.Model.Evento();return a},carregar:function(){var j=ControlaAcesso.Cookies.obterValorCookie(ControlaAcesso.NOME_COOKIE);var c=null;var d=false;try{if(j==""||j==null){if(window.localStorage){localStoragePay=localStorage.getItem(ControlaAcesso.NOME_LOCALSTORAGE);if(localStoragePay!=""){var h=$.parseJSON(localStoragePay);var i=ControlaAcesso.JSON.parsearDataFormatoJson(h.dtExp);if(i>=new Date()){j=localStoragePay;d=true}}}}}catch(g){}if(j!=""){try{var b=$.parseJSON(j);c=new ControlaAcesso.Model.Registro();c.itens=b.itens;if(b.dtini){c.dtIni=ControlaAcesso.JSON.parsearDataFormatoJson(b.dtini);c.eventos=ControlaAcesso.Model.criarEventos();if(b.dtwal){c.eventos.RegisterWall.dtExec=ControlaAcesso.JSON.parsearDataFormatoJson(b.dtwal)}if(b.dtcnv){c.eventos.RegisterWall.dtConv=ControlaAcesso.JSON.parsearDataFormatoJson(b.dtcnv)}}else{c.dtIni=ControlaAcesso.JSON.parsearDataFormatoJson(b.dtIni);c.dtExp=ControlaAcesso.JSON.parsearDataFormatoJson(b.dtExp);c.eventos=b.eventos;for(var k in b.eventos){var f=b.eventos[k];var a=c.eventos[k];if(f.dtExec){a.dtExec=ControlaAcesso.JSON.parsearDataFormatoJson(f.dtExec)}if(f.dtConv){a.dtConv=ControlaAcesso.JSON.parsearDataFormatoJson(f.dtConv)}if(f.motivo){a.motivo=f.motivo}}}}catch(g){c=new ControlaAcesso.Model.Registro();c.eventos=ControlaAcesso.Model.criarEventos()}}else{c=new ControlaAcesso.Model.Registro();c.eventos=ControlaAcesso.Model.criarEventos()}if(d){ControlaAcesso.Model.salvar(c)}return c},salvar:function(d){if(d.dtIni==null){d.dtIni=new Date()}var k=ControlaAcesso.Configuracao.json.diasDeExpiracaoDoCookie;var g=ControlaAcesso.Cookies.calcularDataExpiracao(k,d.dtIni);d.dtExp=g;ControlaAcesso.Cookies.escreverCookie(ControlaAcesso.NOME_COOKIE,ControlaAcesso.JSON.conveterParaJson(d),{expires:g,domain:ControlaAcesso.Configuracao.json.dominioDoCookie,path:ControlaAcesso.Configuracao.json.caminhoDoCookie});var h=ControlaAcesso.Configuracao.json.eventos;var b={};for(var c=0;c<h.length;c++){var a=h[c];b[a.nomeDoEvento]=a.limiteDeAcesso}ControlaAcesso.Cookies.escreverCookie(ControlaAcesso.NOME_COOKIE_CONF,ControlaAcesso.JSON.conveterParaJson(b),{expires:g,domain:ControlaAcesso.Configuracao.json.dominioDoCookie,path:ControlaAcesso.Configuracao.json.caminhoDoCookie});try{var j=ControlaAcesso.Cookies.obterValorCookie(ControlaAcesso.NOME_COOKIE);if(window.localStorage){localStorage.setItem(ControlaAcesso.NOME_LOCALSTORAGE,j)}else{ControlaAcesso.Utils.log("Falha ao escrever no local Storage.")}}catch(f){ControlaAcesso.Utils.log("Falha ao escrever no local Storage.")}},obterConfiguracaoEventos:function(b){var a=ControlaAcesso.Configuracao.json.eventos;if(typeof b=="undefined"){b=ControlaAcesso.Leitor.totalDeVisualizacoes()}for(var c=0;c<a.length;c++){var d=a[c];if(b<=d.limiteDeAcesso||c==a.length-1){return d}}}};ControlaAcesso.Patrocinio=function(b){var a="infgwpat";if(typeof b=="undefined"){throw new Error("Informe o config evento.")}this.ativado=function(){try{var i=b.patrocinio;var f=i!=null&&i.diasDeCortesia>0;if(f){var d=new Date();var c=new Date(i.dataInicio);var g=new Date(i.dataFim);return d>=c&&d<=g}}catch(h){}return false},this.existeCortesia=function(){return ControlaAcesso.Cookies.obterValorCookie(a)!=""},this.criarCortesia=function(){if(this.ativado()&&!this.existeCortesia()){var c=ControlaAcesso.Cookies.calcularDataExpiracao(b.patrocinio.diasDeCortesia);ControlaAcesso.Cookies.escreverCookie(a,"ativado",{expires:c,domain:ControlaAcesso.Configuracao.json.dominioDoCookie,path:ControlaAcesso.Configuracao.json.caminhoDoCookie})}}};ControlaAcesso.Erro={AO_EXECUTAR_O_METODO_NA_CONFIGURACAO:1,AO_CONECTAR_PARA_CARREGAR_CONFIGURACAO:2,AO_CONECTAR_PARA_AUTORIZAR_ACESSO:3,RESPOSTA_DO_SERVICO_NULA:4,FALHA_AO_REGISTRAR_UM_CONTEUDO:5,SERVICO_INDISPONIVEL:6,NOME_DO_COOKIE_SERVICO_FORA:"infgwerr",registrar:function(b,d){var a=new Date(new Date().getTime()+3600000);try{ControlaAcesso.Cookies.escreverCookie(this.NOME_DO_COOKIE_SERVICO_FORA,b,{path:"/",expires:a},false);ControlaAcesso.Utils.log("Codigo de Erro: "+d+" Mensagem: "+b)}catch(c){ControlaAcesso.Utils.log("Falha ao escrever o cookie.")}},existe:function(){return ControlaAcesso.Cookies.obterValorCookie(this.NOME_DO_COOKIE_SERVICO_FORA)!=""}};ControlaAcesso.AutorizaAcesso=function(a,d){var c=a;this.callback=d;this.getConfigEvento=function(){return c};if(c.degustacaoAtivada){var b=ControlaAcesso.Cookies.obterValorCookie(ControlaAcesso.NOME_COOKIE_DEGUSTACAO);if(b!=""){this.callback.autorizado("AUTORIZADO",null,b);ControlaAcesso.Cookies.removerCookie(ControlaAcesso.NOME_COOKIE_DEGUSTACAO,{domain:ControlaAcesso.Configuracao.json.dominioDoCookie,path:ControlaAcesso.Configuracao.json.caminhoDoCookie})}else{this.validarAutorizacao()}return}this.validarAutorizacao()};ControlaAcesso.AutorizaAcesso.prototype.validarAutorizacao=function(){var g=this.getConfigEvento();var b=g.urlDeStatusDoLeitor;if(b.indexOf("://")<0){b=location.protocol+"//"+location.host+b}var a=this;var c="jsonp";var d="application/javascript";var e="get";var f={"token-autenticacao":ControlaAcesso.Cookies.obterValorCookie(ControlaAcesso.GLBID),ipUsuario:"127.0.0.1",codigoProduto:g.codigoDoProduto};if(!g.consultaComJsonp){c="json";d="application/json";e="post";f=ControlaAcesso.JSON.conveterParaJson(f)}$.ajax({contentType:d,headers:{Accept:d},jsonpCallback:"AutorizaAcesso",dataType:c,type:e,data:f,url:b,success:function(h){a.processarResposta(h)},error:function(i,j,h){ControlaAcesso.Erro.registrar(h,ControlaAcesso.Erro.AO_CONECTAR_PARA_AUTORIZAR_ACESSO);a.callback.error()}})};ControlaAcesso.AutorizaAcesso.prototype.processarResposta=function(a){if(a!=null){if(a.mensagem){this.callback.comMensagem(a)}else{if(a.autorizado){if(typeof a.temTermoDeUso!="undefined"&&!a.temTermoDeUso){this.callback.naoAutorizado(a.motivo,a.link_navegacao)}else{this.callback.autorizado(a.motivo,a.link_navegacao)}}else{this.callback.naoAutorizado(a.motivo,a.link_navegacao)}}}else{ControlaAcesso.Erro.registrar("Falha ao processar resposta do barramento.",ControlaAcesso.Erro.RESPOSTA_DO_SERVICO_NULA)}};ControlaAcesso.Core=function(){this.urlLiberada=function(a,c){var b=ControlaAcesso.Utils.extrairDominio(a);return(ControlaAcesso.Utils.trim(b)!=""&&c.indexOf(b)>=0)};this.queryStringLiberada=function(d){var b=new ControlaAcesso.Browser();if(!b.existeQueryString()){return false}for(var c in d){var a=d[c];var e=false;for(var g in a){if(a.hasOwnProperty(g)){var f=b.getParameterByName(g);if(f.toLowerCase()==a[g].toLowerCase()){e=true}else{e=false;break}}}if(e){return true}}return false};this.userAgentLiberado=function(c,a){var b=new RegExp(a);return(ControlaAcesso.Utils.trim(a)!=""&&b.test(c))};this.obterIdentificacaoRegistro=function(b,a){return b+a};this.existeRegistro=function(a,b){for(var c=0;c<a.itens.length;c++){if(a.itens[c]==b){return true}}return false};this.limiteAcessosAlcancado=function(a,b){return(b>=0&&a.itens.length>=b)};this.naoChegouNoLimiteMaximo=function(a){return ControlaAcesso.Configuracao.json.limiteMaximoAcesso>a.itens.length};this.logouNaGloboCom=function(){return ControlaAcesso.Cookies.obterValorCookie(ControlaAcesso.GLBID)!=""};this.redirecionar=function(a){if(a.indexOf("://")<0){if(a.substring(0,1)!="/"){a="/"+a}a=location.protocol+"//"+location.host+a}window.location.href=a};this.registrar=function(e){var c=this.obterIdentificacaoRegistro(e.id,ControlaAcesso.Configuracao.json.identificadorDoProduto);var b=ControlaAcesso.Model.carregar();var f=ControlaAcesso.Model.obterConfiguracaoEventos(b.itens.length);var d=d;if(!ControlaAcesso.Configuracao.json.ativado){if(e.aoAutorizar){e.aoAutorizar(f,d)}return null}if(this.userAgentLiberado(navigator.userAgent,ControlaAcesso.Configuracao.json.userAgentsLivreAcesso)){if(e.aoAutorizar){e.aoAutorizar(f,d)}return null}if(ControlaAcesso.Erro.existe()){if(e.aoAutorizar){e.aoAutorizar(f,d)}return null}if(e.exigirLogin){if(!this.logouNaGloboCom()&&!this.limiteAcessosAlcancado(b,f.limiteDeAcesso)&&!this.urlLiberada(document.referrer,f.urlsLivreAcesso)&&!this.queryStringLiberada(ControlaAcesso.Configuracao.json.queryStringLiberada)){this.redirecionar(ControlaAcesso.Configuracao.json.urlRedirecionamentoExigirLogin);return}}if(this.existeRegistro(b,c)){if(e.aoAutorizar){e.aoAutorizar(f,d)}return null}if(this.limiteAcessosAlcancado(b,f.limiteDeAcesso)){if(!f.ativado){if(this.naoChegouNoLimiteMaximo(b)){b.adicionarConteudoVisualizado(c)}if(e.aoAutorizar){e.aoAutorizar(f,d)}return}if(f.somenteContadorAtivado){if(e.aoAutorizar){e.aoAutorizar(f,d)}return}if(b.eventos[f.nomeDoEvento].dtConv!=null){if(this.naoChegouNoLimiteMaximo(b)){b.adicionarConteudoVisualizado(c)}if(e.aoAutorizar){e.aoAutorizar(f,d)}return null}if(e.naoRedirecionar){if(e.aoAutorizar){e.aoAutorizar(f,d)}return null}if(this.urlLiberada(document.referrer,f.urlsLivreAcesso)){if(e.aoAutorizar){e.aoAutorizar(f,d)}return null}if(this.queryStringLiberada(ControlaAcesso.Configuracao.json.queryStringLiberada)){if(e.aoAutorizar){e.aoAutorizar(f,d)}return null}var g=new ControlaAcesso.Patrocinio(f);if(g.existeCortesia()&&b.eventos[f.nomeDoEvento].dtExec!=null){return}if(this.logouNaGloboCom()){var a=this;new ControlaAcesso.AutorizaAcesso(f,{autorizado:function(i,h,j){b.inserirMotivo(i,f);if(i.toLowerCase()=="indisponivel"){b.atualizarDataDeExecucao(f);ControlaAcesso.Erro.registrar("Servico de autorização de acesso está Indisponivel.",ControlaAcesso.Erro.SERVICO_INDISPONIVEL)}else{b.atualizarDataDeConversao(f)}if(a.naoChegouNoLimiteMaximo(b)){b.adicionarConteudoVisualizado(c)}if(e.aoCompletar){e.aoCompletar(f,j)}if(e.aoAutorizar){e.aoAutorizar(f,{autorizadoNoServico:true})}},naoAutorizado:function(i,h){b.inserirMotivo(i,f);b.atualizarDataDeExecucao(f);if(g.ativado()){if(!g.existeCortesia()){g.criarCortesia();if(e.exibirPatrocinio){e.exibirPatrocinio(f)}}return}if(!h){h=f.urlDeRedirecionamento}else{h+=encodeURIComponent(location.href)}a.redirecionar(h)},comMensagem:function(h){b.inserirMotivo(h.motivo,f);b.atualizarDataDeExecucao(f);if(h.autorizado){b.atualizarDataDeConversao(f)}if(!h.autorizado&&g.ativado()){g.criarCortesia();if(e.exibirPatrocinio){e.exibirPatrocinio(f)}return}e.enviarMensagem(h,f);if(e.aoCompletar){e.aoCompletar(f)}},error:function(){if(e.aoAutorizar){e.aoAutorizar(f,d)}}})}else{b.atualizarDataDeExecucao(f);this.redirecionar(f.urlDeRedirecionamento)}}else{b.adicionarConteudoVisualizado(c)}}};ControlaAcesso.Browser=function(){};ControlaAcesso.Browser.prototype.queryString=function(){return window.location.search};ControlaAcesso.Browser.prototype.existeQueryString=function(){return this.queryString().length>3};ControlaAcesso.Browser.prototype.getParameterByName=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)"),b=c.exec(this.queryString());return b===null?"":decodeURIComponent(b[1].replace(/\+/g," "))};ControlaAcesso.registrar=function(a){if(typeof a=="undefined"){throw new Error("Informe os argumentos para o registro.")}if(typeof a.id=="undefined"){throw new Error("Informe o id do conteúdo a ser registrado.")}if(typeof a.nomeDoCookie!="undefined"){ControlaAcesso.NOME_COOKIE=a.nomeDoCookie}this.iniciar=function(){try{new ControlaAcesso.Core().registrar(a)}catch(d){ControlaAcesso.Erro.registrar(d.message,ControlaAcesso.Erro.FALHA_AO_REGISTRAR_UM_CONTEUDO)}};if(ControlaAcesso.Cookies.obterValorCookie("t3st3pyig")){a.nomeConfig="teste"}try{var c=this;if(!ControlaAcesso.Utils.isNavegadorNativoAndroid()){ControlaAcesso.Utils.detectPrivateMode(function(d){ControlaAcesso.isPrivateMode=d;if(ControlaAcesso.isPrivateMode==true){a.nomeConfig=a.nomeConfig+"_anonima"}ControlaAcesso.Configuracao.carregar(c,a.nomeConfig,a.urlBaseConfig)})}else{ControlaAcesso.Configuracao.carregar(c,a.nomeConfig,a.urlBaseConfig)}}catch(b){ControlaAcesso.Utils.log("Falha ao detectar janela anonima.");ControlaAcesso.Configuracao.carregar(c,a.nomeConfig,a.urlBaseConfig)}};ControlaAcesso.SiteOferta=function(c){if(!c){throw new Error("Dominio não pode ser nulo, undefined ou vazio.")}var a=$.parseJSON(ControlaAcesso.Cookies.obterValorCookie("infgw"));this.atualizarDataDeConversao=function(){a.eventos.Paywall.dtConv=new Date();b()};this.inserirMotivo=function(d){if(!d){throw new Error("Motivo não pode ser nulo, undefined ou vazio.")}a.eventos.Paywall.motivo=d;b()};function b(){ControlaAcesso.Cookies.escreverCookie(ControlaAcesso.NOME_COOKIE,ControlaAcesso.JSON.conveterParaJson(a),{expires:ControlaAcesso.JSON.parsearDataFormatoJson(a.dtExp),domain:c,path:"/"})}};